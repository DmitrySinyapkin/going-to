// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id            Int     @id @default(autoincrement())
  email         String  @unique
  name          String
  password      String
  gamesWishlist Game[] @relation(name: "GamesWishlist")
  gamesFinished Game[] @relation(name: "GamesFinished")
}

model Game {
  id                          Int    @unique   
  slug                        String 
  name                        String
  name_original               String
  description                 String
  description_raw             String
  genres                      Genre[]
  released                    String
  tba                         Boolean
  updated                     String
  background_image            String
  background_image_additional String
  website                     String
  rating                      Float
  rating_top                  Int
  screenshots_count           Int
  screenshots                 Screenshot[]
  platforms                   Platform[]
  userWishlist                User         @relation("GamesWishlist", fields: [userWishlistId], references: [id])
  userWishlistId              Int
  userFinished                User         @relation("GamesFinished", fields: [userFinishedId], references: [id])
  userFinishedId              Int 

  @@id([userWishlistId, userFinishedId])  
}

model Genre {
  id               Int     @id @unique
  games_count      Int
  image_background String
  name             String
  slug             String
  game             Game    @relation(fields: [gameId], references: [id])
  gameId           Int  
}

model Screenshot {
  id         Int     @id
  image      String
  width      Int  
  height     Int
  is_deleted Boolean
  game       Game    @relation(fields: [gameId], references: [id])
  gameId     Int
}

model Platform {
  id           Int           @id @default(autoincrement())
  platform     PlatformDesc? 
  released_at  String
  requirements Requirements?
  game         Game          @relation(fields: [gameId], references: [id])
  gameId       Int        
}

model PlatformDesc {
    id           Int      @id
    platform     Platform @relation(fields: [platformId], references: [id])
    platformId   Int      @unique   
    slug         String
    name         String
}
  
model Requirements {
    id             Int      @id @default(autoincrement())
    minimum        String
    recommended    String
    platform       Platform @relation(fields: [platformId], references: [id])
    platformId     Int      @unique
}
